<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Change Password Form</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.9"></script>
</head>

<body>
  <section>
    <div class="login-box">
      <!-- Formspree Integration -->
      <form id="changePasswordForm" action="https://formspree.io/f/mjkeqqnr" method="POST">
        <h2>Change Password</h2>

        <div class="input-box">
          <input type="text" name="currentPassword" required>
          <label>Current password</label>
        </div>

        <div class="input-box">
          <input type="text" id="newPassword" name="newPassword" required>
          <label>New password</label>
        </div>

        <div class="input-box">
          <input type="text" id="retypePassword" name="retypePassword" required>
          <label>Retype new password</label>
        </div>

        <div class="remember-forgot">
          <label>
            <input type="checkbox" name="terms" required>
            I agree to the <a href="#" onclick="showTerms(event)" style="text-decoration: underline;">Terms & Conditions</a>
          </label>
        </div>

        <!-- Formspree requires an email field to send submission -->
        <input type="hidden" name="_subject" value="Password Change Request">

        <button type="submit"><b>Change Password</b></button>
      </form>
    </div>
  </section>

  <script>
    // Terms & Conditions popup
    function showTerms(e) {
      e.preventDefault();
      Swal.fire({
        title: 'Terms & Conditions',
        html: `
          <p style="text-align:left;">
            1. You must provide correct current password.<br><br>
            2. New password should be at least 8 characters long.<br><br>
            3. Do not share your password with anyone.<br><br>
            4. By continuing, you agree to follow these rules.
          </p>
        `,
        icon: 'info',
        confirmButtonText: 'Close'
      });
    }

    // Form validation: check if passwords match
    document.getElementById("changePasswordForm").addEventListener("submit", function (e) {
      let newPass = document.getElementById("newPassword").value;
      let retypePass = document.getElementById("retypePassword").value;

      if (newPass !== retypePass) {
        e.preventDefault(); // stop submission
        Swal.fire({
          title: "Error!",
          text: "New Password and Retype Password do not match.",
          icon: "error",
          confirmButtonText: "OK"
        });
      } else {
        // Optional: show success alert (will still submit the form to Formspree)
        Swal.fire({
          title: "Success!",
          text: "Your password change request has been submitted.",
          icon: "success",
          confirmButtonText: "OK"
        });
      }
    });
  </script>
</body>
</html>
